@layer theme, components, base, utilities;
@import "tailwindcss";
@tailwind utilities;

@custom-variant dark (&:is([data-theme="trungthu-archive-2024"] *));

@theme {
  --color-sunglow: #ffe12d;
  --color-midnight: #121063;
  --color-tahiti: #3ab7bf;
  --color-bermuda: #78dcca;

  --font-sans:
    var(--font-plus-jakarta-sans), Plus Jakarta Sans, Century Gothic, Arial,
    Helvetica, sans-serif;

  --font-bricolage-grotesque:
    var(--font-bricolage-grotesque), Bricolage Grotesque, Arial, Helvetica,
    sans-serif;

  --color-border: hsla(var(--border), 1);
  --color-input: hsla(var(--input), 1);
  --color-ring: hsla(var(--ring), 1);
  --color-background: hsla(var(--background), 1);
  --color-foreground: hsla(var(--foreground), 1);

  /* Primary family derived from a single --brand color */
  --color-primary-50: hsl(from var(--brand) h s calc(l + 39%));
  --color-primary-100: hsl(from var(--brand) h s calc(l + 33%));
  --color-primary-200: hsl(from var(--brand) h s calc(l + 25%));
  --color-primary-300: hsl(from var(--brand) h s calc(l + 17%));
  --color-primary-400: hsl(from var(--brand) h s calc(l + 8%));
  --color-primary-500: hsl(from var(--brand) h s l);
  --color-primary-600: hsl(from var(--brand) h s calc(l - 7%));
  --color-primary-700: hsl(from var(--brand) h s calc(l - 15%));
  --color-primary-800: hsl(from var(--brand) h s calc(l - 23%));
  --color-primary-900: hsl(from var(--brand) h s calc(l - 31%));
  --color-primary-1000: hsl(from var(--brand) h s calc(l - 39%));
  --color-primary: var(--brand);
  --color-primary-foreground: hsla(var(--primary-foreground), 1);

  --color-secondary-50: hsla(var(--secondary-50), 1);
  --color-secondary-100: hsla(var(--secondary-100), 1);
  --color-secondary-200: hsla(var(--secondary-200), 1);
  --color-secondary-300: hsla(var(--secondary-300), 1);
  --color-secondary-400: hsla(var(--secondary-400), 1);
  --color-secondary-500: hsla(var(--secondary-500), 1);
  --color-secondary-600: hsla(var(--secondary-600), 1);
  --color-secondary-700: hsla(var(--secondary-700), 1);
  --color-secondary-800: hsla(var(--secondary-800), 1);
  --color-secondary-900: hsla(var(--secondary-900), 1);
  --color-secondary-1000: hsla(var(--secondary-1000), 1);
  --color-secondary: hsla(var(--secondary), 1);
  --color-secondary-foreground: hsla(var(--secondary-foreground), 1);

  --color-destructive: hsla(var(--destructive), 1);
  --color-destructive-foreground: hsla(var(--destructive-foreground), 1);

  --color-muted: hsla(var(--muted), 1);
  --color-muted-foreground: hsla(var(--muted-foreground), 1);

  --color-accent-50: hsla(var(--accent-50), 1);
  --color-accent-100: hsla(var(--accent-100), 1);
  --color-accent-200: hsla(var(--accent-200), 1);
  --color-accent-300: hsla(var(--accent-300), 1);
  --color-accent-400: hsla(var(--accent-400), 1);
  --color-accent-500: hsla(var(--accent-500), 1);
  --color-accent-600: hsla(var(--accent-600), 1);
  --color-accent-700: hsla(var(--accent-700), 1);
  --color-accent-800: hsla(var(--accent-800), 1);
  --color-accent-900: hsla(var(--accent-900), 1);
  --color-accent-1000: hsla(var(--accent-1000), 1);
  --color-accent: hsla(var(--accent), 1);
  --color-accent-foreground: hsla(var(--accent-foreground), 1);

  /* Functional color scales mapped for Tailwind utilities */
  --color-success-50: hsla(var(--success-50), 1);
  --color-success-100: hsla(var(--success-100), 1);
  --color-success-200: hsla(var(--success-200), 1);
  --color-success-300: hsla(var(--success-300), 1);
  --color-success-400: hsla(var(--success-400), 1);
  --color-success-500: hsla(var(--success-500), 1);
  --color-success-600: hsla(var(--success-600), 1);
  --color-success-700: hsla(var(--success-700), 1);
  --color-success-800: hsla(var(--success-800), 1);
  --color-success-900: hsla(var(--success-900), 1);
  --color-success-1000: hsla(var(--success-1000), 1);

  --color-warning-50: hsla(var(--warning-50), 1);
  --color-warning-100: hsla(var(--warning-100), 1);
  --color-warning-200: hsla(var(--warning-200), 1);
  --color-warning-300: hsla(var(--warning-300), 1);
  --color-warning-400: hsla(var(--warning-400), 1);
  --color-warning-500: hsla(var(--warning-500), 1);
  --color-warning-600: hsla(var(--warning-600), 1);
  --color-warning-700: hsla(var(--warning-700), 1);
  --color-warning-800: hsla(var(--warning-800), 1);
  --color-warning-900: hsla(var(--warning-900), 1);
  --color-warning-1000: hsla(var(--warning-1000), 1);

  --color-destructive-50: hsla(var(--destructive-50), 1);
  --color-destructive-100: hsla(var(--destructive-100), 1);
  --color-destructive-200: hsla(var(--destructive-200), 1);
  --color-destructive-300: hsla(var(--destructive-300), 1);
  --color-destructive-400: hsla(var(--destructive-400), 1);
  --color-destructive-500: hsla(var(--destructive-500), 1);
  --color-destructive-600: hsla(var(--destructive-600), 1);
  --color-destructive-700: hsla(var(--destructive-700), 1);
  --color-destructive-800: hsla(var(--destructive-800), 1);
  --color-destructive-900: hsla(var(--destructive-900), 1);
  --color-destructive-1000: hsla(var(--destructive-1000), 1);

  --color-popover: hsla(var(--popover), 1);
  --color-popover-foreground: hsla(var(--popover-foreground), 1);

  --color-card: hsla(var(--card), 1);
  --color-card-foreground: hsla(var(--card-foreground), 1);

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 10px);
  --radius-sm: calc(var(--radius) - 4px);

  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;
  --animate-marquee: marquee 25s linear infinite;
  --animate-marquee-reverse: marquee-reverse 25s linear infinite;
  --animate-fade-in: fadeIn 0.3s ease-out forwards;
  --animate-scroll-x: scrollX 30s linear infinite;

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }
  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
  @keyframes marquee {
    0% {
      transform: translateX(0%);
    }
    100% {
      transform: translateX(-100%);
    }
  }
  @keyframes marquee-reverse {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(0%);
    }
  }
  @keyframes fadeIn {
    0% {
      opacity: 0;
      transform: translateY(10px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
  @keyframes scrollX {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-100%);
    }
  }
  @keyframes bgPanX {
    from {
      background-position-x: 0%;
    }
    to {
      background-position-x: 100%;
    }
  }
  @keyframes bgPanY {
    from {
      background-position-y: 0%;
    }
    to {
      background-position-y: 100%;
    }
  }
}

@utility container {
  margin-inline: auto;
  padding-inline: 2rem;
  @media (width >= --theme(--breakpoint-sm)) {
    max-width: none;
  }
  @media (width >= 1400px) {
    max-width: 1400px;
  }
}

/*
  The default border color has changed to `currentColor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentColor);
  }
}
/* Custom text border hover effect */
@utility text-hover-stroke-sunglow {
  @apply text-black transition-all duration-300 ease-in-out;

  &:hover {
    @apply text-stroke-sunglow;
  }
}

/* Fix for text stroke rendering */
@utility fix-stroke {
  paint-order: stroke fill;
}

/* Custom text border hover effect */
@utility text-hover-explode {
  @apply text-black transition-all duration-300 ease-in-out;

  &:hover {
    @apply text-sunglow;
    text-shadow:
      -3rem 0 black,
      0 3rem black,
      3rem 0 black,
      0 -3rem black;
  }
}

/* Reusable stroked sunglow text */
@utility text-stroke-sunglow {
  @apply text-sunglow;
  -webkit-text-stroke: 0.06em black;
  paint-order: stroke fill;
}

/* See 
  - https://github.com/payloadcms/payload/issues/8878 for issue discussion
  - https://payloadcms.com/docs/admin/customizing-css for detailed info "Specificity Rules"
  All Payload CSS is encapsulated inside CSS layers 'payload-default'. Any custom css will now have the highest possible specificity.
  We have also provided a layer 'payload' if you want to use layers and ensure that your styles are applied after payload.
  To override existing styles in a way that the previous rules of specificity would be respected you can use the default layer like so
*/
@layer payload-default {
}

@layer base {
  :root {
    --background: 0, 0%, 100%;
    --foreground: 11.25, 50%, 6.27%;

    --primary: 11.93, 86.1%, 63.33%;
    --primary-foreground: 0, 0%, 100%;

    --card: 0, 0%, 100%;
    --card-foreground: 11.25, 50%, 6.27%;

    --popover: 0, 0%, 100%;
    --popover-foreground: 11.25, 50%, 6.27%;

    --secondary: 12.5, 85.71%, 94.51%;
    --secondary-foreground: 0, 0%, 0%;

    --muted: 11.25, 88.89%, 96.47%;
    --muted-foreground: 0, 0%, 40%;

    --accent: 11.25, 88.89%, 96.47%;
    --accent-foreground: 11.93, 86.1%, 63.33%;

    --destructive: 0, 84.2%, 60.2%;
    --destructive-foreground: 210, 40%, 98%;

    --border: 0, 0%, 90.2%;
    --input: 0, 0%, 90.2%;
    --ring: 11.93, 86.1%, 63.33%;

    --radius: 0.1rem;

    /* Company-wide brand seed (sunglow) */
    --brand: hsl(47 100% 56%);
    --primary-foreground: 0 0% 0%;

    /* Functional scales (shared across all themes) */
    /* Success */
    --success-50: 142 71% 95%;
    --success-100: 141 63% 88%;
    --success-200: 141 61% 78%;
    --success-300: 142 55% 65%;
    --success-400: 142 60% 48%;
    --success-500: 142 76% 36%;
    --success-600: 142 84% 30%;
    --success-700: 142 90% 25%;
    --success-800: 142 90% 20%;
    --success-900: 142 85% 15%;
    --success-1000: 142 80% 10%;

    /* Warning */
    --warning-50: 38 100% 95%;
    --warning-100: 38 100% 88%;
    --warning-200: 38 100% 80%;
    --warning-300: 38 96% 70%;
    --warning-400: 38 95% 60%;
    --warning-500: 38 92% 50%;
    --warning-600: 34 92% 44%;
    --warning-700: 32 92% 36%;
    --warning-800: 30 92% 28%;
    --warning-900: 32 95% 22%;
    --warning-1000: 30 95% 16%;

    /* Destructive */
    --destructive-50: 0 85% 96%;
    --destructive-100: 0 84% 90%;
    --destructive-200: 0 84% 82%;
    --destructive-300: 0 84% 72%;
    --destructive-400: 0 84% 66%;
    --destructive-500: 0 84% 60%;
    --destructive-600: 0 80% 52%;
    --destructive-700: 0 75% 42%;
    --destructive-800: 0 75% 36%;
    --destructive-900: 0 75% 30%;
    --destructive-1000: 0 70% 22%;
  }
  .dark {
    --primary: 11.93, 86.1%, 63.33%;
    --primary-foreground: 0, 0%, 100%;

    --card: 0, 0%, 0%;
    --card-foreground: 12.5, 85.71%, 94.51%;

    --popover: 0, 0%, 0%;
    --popover-foreground: 12.5, 85.71%, 94.51%;

    --secondary: 12.63, 50.44%, 22.16%;
    --secondary-foreground: 0, 0%, 100%;

    --muted: 0, 0%, 9.8%;
    --muted-foreground: 0, 0%, 50.2%;

    --accent: 12.63, 50.44%, 22.16%;
    --accent-foreground: 12.5, 85.71%, 94.51%;

    --destructive: 0, 84.2%, 60.2%;
    --destructive-foreground: 210, 40%, 98%;

    --border: 0, 0%, 14.9%;
    --input: 0, 0%, 14.9%;
    --ring: 11.93, 86.1%, 63.33%;

    --radius: 0.1rem;

    /* Hero defaults */
    --hero-overlay-alpha: 0;
  }

  /* https://coolors.co/e4aac2-551b33-75cf54-db0058-c98e36 */
  /* https://www.realtimecolors.com/?colors=e4aac2-551b33-75cf54-db0058-c98e36&fonts=Plus%20Jakarta%20Sans-Plus%20Jakarta%20Sans */
  [data-theme="trungthu-archive-2024"] {
    --background: 335, 52%, 9%;
    --foreground: 325, 52%, 88%;

    --card: 335, 52%, 88%;
    --card-foreground: 325, 52%, 9%;

    --popover: 335, 52%, 88%;
    --popover-foreground: 325, 52%, 9%;

    --brand: hsl(336 100% 57%);
    --primary: 336, 100%, 57%; /* #ff257c */
    --primary-foreground: 334.29, 100%, 97.25%;

    --secondary: 356.59, 92.63%, 37.25%; /* #b70711 */
    --secondary-foreground: 346.67, 100%, 89.41%;

    --muted: 329.07, 51.32%, 37.06%; /* #8F2E60 */
    --muted-foreground: 329, 52%, 55%; /* #8F2E60 */

    --accent: 103.9, 56.16%, 42.94%; /* #51AB30 */
    --accent-foreground: 325, 52%, 9%;

    --destructive: 0, 85%, 60%;
    --destructive-foreground: 325, 52%, 9%;

    --border: 325.85, 52%, 75.49%;
    --input: 325.85, 52%, 9.49%;
    --ring: 87, 86%, 40%;

    --radius: 0.1rem;

    /* Slightly stronger overlay for readability behind cards/forms */
    --hero-overlay-alpha: 0.1;
  }

  [data-theme="trungthu-archive-2025"] {
    --background: 325.5882, 97.1429%, 88.2745%;
    --foreground: 334.5455, 76.7442%, 4.314%;
    --card: 332.1429, 93.3333%, 94.1176%;
    --card-foreground: 334.5455, 76.7442%, 8.4314%;
    --popover: 332.1429, 93.3333%, 94.1176%;
    --popover-foreground: 334.5455, 76.7442%, 8.4314%;
    --brand: hsl(336.055 100% 57.2549%);
    --primary: 336.055, 100%, 57.2549%;
    --primary-foreground: 334.5455, 76.7442%, 4.314%;
    --secondary: 61.4458, 85.567%, 80.9804%;
    --secondary-foreground: 334.5455, 76.7442%, 8.4314%;
    --muted: 332.1429, 93.3333%, 94.1176%;
    --muted-foreground: 330, 26.7327%, 25%;
    --accent: 61.055, 86%, 38.2549%;
    --accent-foreground: 61.055, 86%, 81%;
    --destructive: 0, 84.2365%, 60.1961%;
    --destructive-foreground: 0, 0%, 100%;
    --border: 61.4458, 85.567%, 80.9804%;
    --input: 332.1429, 93.3333%, 94.1176%;
    --ring: 336.055, 100%, 57.2549%;
    --chart-1: 336.055, 100%, 57.2549%;
    --chart-2: 61.4458, 85.567%, 80.9804%;
    --chart-3: 270.7407, 91.0112%, 65.098%;
    --chart-4: 217.2193, 91.2195%, 59.8039%;
    --chart-5: 173.4146, 80.3922%, 40%;
    --sidebar: 332.1429, 93.3333%, 94.1176%;
    --sidebar-foreground: 334.5455, 76.7442%, 8.4314%;
    --sidebar-primary: 336.055, 100%, 57.2549%;
    --sidebar-primary-foreground: 0, 0%, 100%;
    --sidebar-accent: 61.4458, 85.567%, 80.9804%;
    --sidebar-accent-foreground: 334.5455, 76.7442%, 8.4314%;
    --sidebar-border: 61.4458, 85.567%, 80.9804%;
    --sidebar-ring: 336.055, 100%, 57.2549%;
    --radius: 0.5rem;
    /* Primary ladder derived from --brand via @theme */

    --shadow-2xs: 0px 2px 8px 0px hsl(0 0% 0% / 0.05);
    --shadow-xs: 0px 2px 8px 0px hsl(0 0% 0% / 0.05);
    --shadow-sm:
      0px 2px 8px 0px hsl(0 0% 0% / 0.1), 0px 1px 2px -1px hsl(0 0% 0% / 0.1);
    --shadow:
      0px 2px 8px 0px hsl(0 0% 0% / 0.1), 0px 1px 2px -1px hsl(0 0% 0% / 0.1);
    --shadow-md:
      0px 2px 8px 0px hsl(0 0% 0% / 0.1), 0px 2px 4px -1px hsl(0 0% 0% / 0.1);
    --shadow-lg:
      0px 2px 8px 0px hsl(0 0% 0% / 0.1), 0px 4px 6px -1px hsl(0 0% 0% / 0.1);
    --shadow-xl:
      0px 2px 8px 0px hsl(0 0% 0% / 0.1), 0px 8px 10px -1px hsl(0 0% 0% / 0.1);
    --shadow-2xl: 0px 2px 8px 0px hsl(0 0% 0% / 0.25);
    --tracking-normal: normal;
    --spacing: 0.25rem;
  }

  /* https://coolors.co/f3f1f2-010101-dea3a5-f86134-283bdd */
  /* https://www.realtimecolors.com/?colors=010101-F3F1F2-F86134-283BDD-dea3a5&fonts=Plus%20Jakarta%20Sans-Plus%20Jakarta%20Sans */
  [data-theme="early-access-2024"] {
    --background: 330, 8%, 95%;
    --foreground: 0, 0%, 0%;

    --card: 330, 8%, 95%;
    --card-foreground: 0, 0%, 0%;

    --popover: 330, 8%, 95%;
    --popover-foreground: 0, 0%, 0%;

    --brand: hsl(14 93% 59%);
    --primary: 14, 93%, 59%;
    --primary-foreground: 0, 0%, 0%;
    --secondary: 358, 47%, 75%;
    --secondary-foreground: 0, 0%, 0%;

    --muted: 330, 8%, 20%;
    --muted-foreground: 0, 0%, 70%;

    --accent: 234, 73%, 51%;
    --accent-foreground: 330, 8%, 95%;

    --destructive: 0, 85%, 60%;
    --destructive-foreground: 0, 0%, 0%;

    --border: 330, 8%, 20%;
    --input: 330, 8%, 20%;
    --ring: 234, 73%, 40%;

    /* Primary ladder derived from --brand via @theme */

    --radius: 0.1rem;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

@utility no-scrollbar {
  @apply [scrollbar-width:none] [&::-webkit-scrollbar]:hidden;
}

/* Removed manual bg-* color classes; use Tailwind tokens (bg-primary-500, bg-success-500, etc.) */

@layer utilities {
  /* Responsive Metadata Card sizing */
  .metadata-card {
    flex: 0 0 50vw; /* approx 50% of viewport width */
    width: 50vw;
    min-width: 250px; /* ensure usability on very small screens */
    height: 100%;
    overflow-y: auto;
  }
  @media (orientation: portrait) {
    .metadata-card {
      flex: 0 0 auto;
      width: 100%;
      height: auto;
    }
  }

  /* Responsive wrapper for media blocks */
  .media-wrapper {
    width: auto;
    height: 100%;
  }
  @media (orientation: portrait) {
    .media-wrapper {
      width: 100%;
      height: auto;
    }
  }

  /* Wrapper for non-media blocks that is square by default but tall in landscape */
  .square-wrapper {
    aspect-ratio: 1 / 1;
  }

  /* Landscape + short viewport (<640px tall)  → use tall scrollable card */
  @media (orientation: landscape) and (max-height: 639px) {
    .square-wrapper {
      aspect-ratio: auto;
      height: 100%;
      max-width: 100vw;
      overflow-y: auto;
    }
  }

  /* Landscape + tall viewport (>=640px) → keep square */
  @media (orientation: landscape) and (min-height: 640px) {
    .square-wrapper {
      aspect-ratio: 1 / 1;
      height: auto;
      overflow: visible;
    }
  }

  /* Responsive image sizing based on device orientation */
  .img-orientation {
    width: 100%;
    height: auto;
  }

  @media (orientation: landscape) {
    .img-orientation {
      width: auto;
      height: 100%;
    }
  }

  /* Orientation-aware flex container that switches scroll direction */
  .orientation-flow {
    display: flex;
    flex-direction: row;
    overflow-x: auto;
    overflow-y: hidden;
    scroll-snap-type: x mandatory;
  }

  @media (orientation: portrait) {
    .orientation-flow {
      flex-direction: column;
      overflow-x: hidden;
      overflow-y: auto;
      scroll-snap-type: y mandatory;
    }

    /* Flex-only orientation utility (no scroll behaviors) */
    .orientation-flex {
      flex-direction: column;
    }
  }

  /* Default orientation-flex (landscape) */
  .orientation-flex {
    display: flex;
    flex-direction: row;
  }

  /* Scroll-driven parallax for event pages */
  #event-scroll {
    scroll-timeline-name: eventScroll;
    scroll-timeline-axis: inline;
  }
  @media (orientation: portrait) {
    #event-scroll {
      scroll-timeline-axis: block;
    }
  }
  .bg-parallax {
    background-repeat: no-repeat;
    /* Ensure full width of the background image is visible */
    background-size: 100% auto;
    /* Center horizontally, align to top vertically */
    background-position: center top;
    /* Align to top by default; horizontal alignment can be set via utilities (e.g., bg-center) */
    animation: bgPanX linear both;
    /* Tie to viewport scroll (horizontal in landscape) */
    animation-timeline: scroll(root inline);
    animation-range: 0% 100%;
  }
  @media (orientation: portrait) {
    .bg-parallax {
      animation-name: bgPanY;
      /* Tie to viewport vertical scroll in portrait */
      animation-timeline: scroll(root block);
    }
  }

  /* Explicit parallax variants (orientation-independent) */
  .bg-parallax-horizontal {
    background-repeat: no-repeat;
    background-size: 100% auto;
    background-position: center top;
    animation: bgPanX linear both;
    animation-timeline: scroll(root inline);
    animation-range: 0% 100%;
  }

  .bg-parallax-vertical {
    background-repeat: no-repeat;
    background-size: 100% auto;
    background-position: center top;
    animation: bgPanY linear both;
    animation-timeline: scroll(root block);
    animation-range: 0% 100%;
  }
}
